{% extends 'base.html' %}

{% block content %}
    <h1>{% block title %} Country Population vs Number of Vaccinated{% endblock %}</h1>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ title }}</title>
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js'></script>
</head>
<body>
  <center>
    <h1>{{ title }}</h1>

    <canvas id="scatterChart" width="400" height="400"></canvas>

    <script>
        var population = {{population | tojson}};
        var vaccinated = {{vaccinated | tojson}};
        var labels = {{labels | tojson}};

        var chartData = {
            datasets: [{
              label: 'Country',
              backgroundColor:"green",
              data: []
            }]
          }
        for (var i = 0; i < population.length; i++) {
          chartData.datasets[0].data.push(
            {
              x: population[i],
              y: vaccinated[i]
            }
          )
        }

        const ctx = document.getElementById('scatterChart').getContext('2d');

        const chart = new Chart(ctx, {
          type: 'scatter',
          data: chartData,
          options: {
             tooltips: {
                 callbacks: {
                    label: function(tooltipItem, data) {
                       var label = labels[tooltipItem.index];
                       return label + ': (' + tooltipItem.xLabel + ', ' + tooltipItem.yLabel + ')';
                    }
                 }
              },
             scales: {
              yAxes: [{
                scaleLabel: {
                  display: true,
                  labelString: "Total Vaccinations Per Hundred"
                }
              }],
              xAxes: [{
                scaleLabel: {
                  display: true,
                  labelString: "Total Population"
                }
              }]
            }
          }
      });
    </script>
  </center>
</body>
{% endblock %}